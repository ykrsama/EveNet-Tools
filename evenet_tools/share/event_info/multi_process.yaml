EXCLUDE:
  Momentum: &Momentum
    - pt
    - eta
    - phi

# ---------------------------------------------------
# REQUIRED - INPUTS - List all inputs to EveNet here.
# ---------------------------------------------------
INPUTS:
  # -----------------------------------------------------------------------------
  # REQUIRED - SEQUENTIAL - inputs which can have an arbitrary number of vectors.
  # -----------------------------------------------------------------------------
  SEQUENTIAL:
    Source:
      #      mass: log_normalize
      energy: log_normalize
      pt: log_normalize
      eta: normalize
      phi: normalize_uniform
      btag: none
      isLepton: none
      charge: none

  # ---------------------------------------------------------------------
  # REQUIRED - GLOBAL - inputs which will have a single vector per event.
  # ---------------------------------------------------------------------
  GLOBAL:
    Conditions:
      met: log_normalize
      met_phi: normalize
      nLepton: none
      nbJet: none
      nJet: none
      HT: log_normalize
      HT_lep: log_normalize
      M_all: log_normalize
      M_leps: log_normalize
      M_bjets: log_normalize

# ----------------------------------------------------------------------
# REQUIRED - EVENT - Complete list of resonance particles and daughters.
# ----------------------------------------------------------------------
EVENT:

  TTHadronics:
    t1:
      - b
      - q1
      - q2
    t2:
      - b
      - q1
      - q2

  TT1L:
    t1:
      - b
      - q1
      - q2
    t2:
      - b
      - l

  TT2L:
    t1:
      - b
      - l+
    t2:
      - b
      - l-

  WJetsToLNu:
    W:
      - l

  WJetsToQQ:
    W:
      - q1
      - q2

  ZJetsToQQ:
    Z:
      - q1
      - q2

  ZJetsToLL:
    Z:
      - l1
      - l2

  ZZ_4L:
    Z1:
      - l1
      - l2
    Z2:
      - l1
      - l2

  ZZ_2L:
    Z1:
      - l1
      - l2
    Z2:
      - q1
      - q2

  WW_1L:
    W1:
      - l
    W2:
      - q1
      - q2

  WW_2L:
    W+:
      - l+
    W-:
      - l-

  WZ_1L:
    W:
      - l
    Z:
      - q1
      - q2
  
  WZ_2L:
    W:
      - q1
      - q2
    Z:
      - l1
      - l2

  WZ_3L:
    W:
      - l
    Z:
      - l1
      - l2


  ttW_FullHadronics:
    t1:
      - b
      - q1
      - q2
    t2:
      - b
      - q1
      - q2
    W:
      - q1
      - q2
  ttW_Leptonic:
    t1:
      - b
      - q1
      - q2
    t2:
      - b
      - q1
      - q2
    W:
      - l
  ttW_tHtLWH:
    t1:
      - b
      - q1
      - q2
    t2:
      - b
      - l
    W:
      - q1
      - q2
  ttW_tHtLWL:
    t1:
      - b
      - q1
      - q2
    t2:
      - b
      - l
    W:
      - l

  ttZ_FullHadronics:
    t1:
      - b
      - q1
      - q2
    t2:
      - b
      - q1
      - q2
    Z:
      - q1
      - q2

  ttZ_Leptonic:
    t1:
      - b
      - q1
      - q2
    t2:
      - b
      - q1
      - q2
    Z:
      - l1
      - l2
  ttZ_tHtLZH:
    t1:
      - b
      - q1
      - q2
    t2:
      - b
      - l
    Z:
      - q1
      - q2
  ttZ_tHtLZL:
    t1:
      - b
      - q1
      - q2
    t2:
      - b
      - l
    Z:
      - l1
      - l2

  HWW_WpLepWmLep:
    W+:
      - l+
    W-:
      - l-
  HWW_WpHadWmHad:
    W+:
      - q1
      - q2
    W-:
      - q1
      - q2
  HWW_WpHadWmLep:
    W+:
      - q1
      - q2
    W-:
      - l-
  HWW_WpLepWmHad:
    W+:
      - l+
    W-:
      - q1
      - q2


# ---------------------------------------------------------
# REQUIRED KEY - PERMUTATIONS - List of valid permutations.
# ---------------------------------------------------------
PERMUTATIONS:

  TTHadronics:
    EVENT:
      - [ t1, t2 ]
    t1:
      - [ q1, q2 ]
    t2:
      - [ q1, q2 ]

  TT1L:
    t1:
      - [ q1, q2 ]

  TT2L:
    - [ ]

  WJetsToQQ:
    W:
      - [ q1, q2 ]

  ZJetsToQQ:
    Z:
      - [ q1, q2 ]

  ZJetsToLL:
    Z:
      - [ l1, l2 ]

  ZZ_4L:
    EVENT:
      - [ Z1, Z2 ]
    Z1:
      - [ l1, l2 ]
    Z2:
      - [ l1, l2 ]

  ZZ_2L:
    Z1:
      - [ l1, l2 ]
    Z2:
      - [ q1, q2 ]

  WW_1L:
    W2:
      - [ q1, q2 ]

  WW_2L:
    - []

  WZ_1L:
    Z:
      - [ q1, q2 ]

  WZ_2L:
    W:
      - [ q1, q2 ]
    Z:
      - [ l1, l2 ]

  WZ_3L:
    Z:
      - [ l1, l2 ]
  
  ttW_FullHadronics:
    EVENT:
      - [ t1, t2 ]
    t1:
      - [ q1, q2 ]
    t2:
      - [ q1, q2 ]
    W:
      - [ q1, q2 ]
  ttW_Leptonic:
    EVENT:
      - [ t1, t2 ]
    t1:
      - [ q1, q2 ]
    t2:
      - [ q1, q2 ]
  ttW_tHtLWH:
    t1:
      - [ q1, q2 ]
    W:
      - [ q1, q2 ]
  ttW_tHtLWL:
    t1:
      - [ q1, q2 ]

  ttZ_FullHadronics:
    EVENT:
      - [ t1, t2 ]
    t1:
      - [ q1, q2 ]
    t2:
      - [ q1, q2 ]
    Z:
      - [ q1, q2 ]

  ttZ_Leptonic:
    EVENT:
      - [ t1, t2 ]
    t1:
      - [ q1, q2 ]
    t2:
      - [ q1, q2 ]
    Z:
      - [ l1, l2 ]
  ttZ_tHtLZH:
    t1:
      - [ q1, q2 ]
    Z:
      - [ q1, q2 ]
  ttZ_tHtLZL:
    t1:
      - [ q1, q2 ]
    Z:
      - [ l1, l2 ]

  WJetsToLNu:
    - [ ]

  HWW_WpLepWmLep:
    - [ ]
  HWW_WpHadWmHad:
    - [ ]
  HWW_WpHadWmLep:
    - [ ]
  HWW_WpLepWmHad:
    - [ ]

# -----------------------------------------------------------------------------
# REQUIRED - SEGMENTATIONS - List of desired classes to predict from observables.
# -----------------------------------------------------------------------------
SEGMENTATIONS:
  regression: # log and uniform normalization not implemented yet
    pt: normalize # log_normalize
    eta: normalize
    phi: normalize_uniform
    mass: normalize # log_normalize

# ------------------------------------------------------------------------------
# REQUIRED - REGRESSIONS - List of desired features to regress from observables.
# ------------------------------------------------------------------------------
REGRESSIONS:

  TTHadronics:
    t1: *Momentum
    t2: *Momentum

  TT1L:
    t1: *Momentum
    t2: *Momentum
    t2/v: *Momentum

  TT2L:
    t1: *Momentum
    t1/v: *Momentum
    t2: *Momentum
    t2/v: *Momentum

  ttW_Leptonic:
    t1: *Momentum
    t2: *Momentum
    W: *Momentum
    W/v: *Momentum
  ttW_tHtLWH:
    t1: *Momentum
    t2: *Momentum
    t2/v: *Momentum
    W: *Momentum
  ttW_tHtLWL:
    t1: *Momentum
    t2: *Momentum
    t2/v: *Momentum
    W: *Momentum
    W/v: *Momentum

  ttZ_tHtLZH:
    t1: *Momentum
    t2: *Momentum
    t2/v: *Momentum
    Z: *Momentum
  ttZ_tHtLZL:
    t1: *Momentum
    t2: *Momentum
    t2/v: *Momentum
    Z: *Momentum

  WJetsToLNu:
    W/v: *Momentum

  WJetsToQQ:
    W: *Momentum

  ZJetsToQQ:
    Z: *Momentum

  ZJetsToLL:
    Z: *Momentum

  ZZ_2L:
    Z1: *Momentum
    Z2: *Momentum

  WW_1L:
    W1: *Momentum
    W1/v: *Momentum
    W2: *Momentum

  WW_2L:
    W+: *Momentum
    W+/v: *Momentum
    W-: *Momentum
    W-/v: *Momentum

  WZ_1L:
    W: *Momentum
    W/v: *Momentum
    Z: *Momentum

  WZ_2L:
    W: *Momentum
    Z: *Momentum

  WZ_3L:
    W: *Momentum
    W/v: *Momentum
    Z: *Momentum

  HWW_WpLepWmLep:
    W+: *Momentum
    W+/v: *Momentum
    W-: *Momentum
    W-/v: *Momentum
  HWW_WpHadWmHad:
    W+: *Momentum
    W-: *Momentum
  HWW_WpHadWmLep:
    W+: *Momentum
    W-: *Momentum
    W-/v: *Momentum
  HWW_WpLepWmHad:
    W+: *Momentum
    W+/v: *Momentum
    W-: *Momentum
# -----------------------------------------------------------------------------
# REQUIRED - REGRESSIONS - List of desired classes to predict from observables.
# -----------------------------------------------------------------------------
CLASSIFICATIONS:
  EVENT:
    - signal


CLASSLABEL:
  EVENT:
    signal:
      - [ QCD, TT, ttW, ttZ, WJets, ZJets, WW, ZZ, WZ, HWW ]


RESONANCE_LABEL:
  - ["null", "t(had)", "t1l", "W(had)", "W(off-s)", "Z(had)", "Z(l)", "W(l)", "W(l,off-s)" ]

PARTICLE_PROPERTIES:
  - Energy
  - Spin
  - nProduct_BJet
  - nProduct_Jet
  - nProduct_Lepton
  - Product_LeptonCharge

GENERATIONS:
  Conditions:
    - met
    - met_phi
    - M_all
  GlobalTargets:
    - HT

  Events:
    - energy
    - pt
    - eta
    - phi
    - btag
    - isLepton
    - charge

  Neutrinos:
    pt: log_normalize
    eta: normalize
    phi: normalize_uniform